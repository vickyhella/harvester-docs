<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-vm/create-windows-vm">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">The open source hyperconverged infrastructure (HCI) solution for a cloud native world</title><meta data-rh="true" property="og:title" content="The open source hyperconverged infrastructure (HCI) solution for a cloud native world"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://vickyhella.site/harvester-docs/zh/vm/create-windows-vm"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="description" content="你可以从 Virtual Machines 页面创建一个或多个虚拟机。"><meta data-rh="true" property="og:description" content="你可以从 Virtual Machines 页面创建一个或多个虚拟机。"><meta data-rh="true" name="keywords" content="Harvester,harvester,Rancher,rancher,Windows,windows,虚拟机,VM,创建 Windows 虚拟机"><link data-rh="true" rel="icon" href="/harvester-docs/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://vickyhella.site/harvester-docs/zh/vm/create-windows-vm"><link data-rh="true" rel="alternate" href="https://vickyhella.site/harvester-docs/vm/create-windows-vm" hreflang="en"><link data-rh="true" rel="alternate" href="https://vickyhella.site/harvester-docs/zh/vm/create-windows-vm" hreflang="zh"><link data-rh="true" rel="alternate" href="https://vickyhella.site/harvester-docs/vm/create-windows-vm" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/harvester-docs/zh/kb/rss.xml" title="The open source hyperconverged infrastructure (HCI) solution for a cloud native world RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/harvester-docs/zh/kb/atom.xml" title="The open source hyperconverged infrastructure (HCI) solution for a cloud native world Atom Feed"><link rel="stylesheet" href="/harvester-docs/zh/assets/css/styles.65092601.css">
<link rel="preload" href="/harvester-docs/zh/assets/js/runtime~main.39f8dad8.js" as="script">
<link rel="preload" href="/harvester-docs/zh/assets/js/main.abac7136.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/harvester-docs/zh/"><div class="navbar__logo"><img src="/harvester-docs/zh/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/harvester-docs/zh/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/harvester-docs/zh/">v1.0</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/harvester-docs/zh/vm/create-windows-vm">v1.0</a></li><li><a class="dropdown__link" href="/harvester-docs/zh/v0.3/">v0.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/harvester-docs/vm/create-windows-vm" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/harvester-docs/zh/vm/create-windows-vm" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">简体中文</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/harvester-docs/zh/">文档</a><a href="https://www.suse.com/c/?s=harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__blog">博文<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link navbar__kb" href="/harvester-docs/zh/kb">知识库</a><a href="https://github.com/harvester/harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/">Harvester 介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/harvester-docs/zh/install/requirements">安装</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/airgap">离线环境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/harvester-docs/zh/upgrade/automatic">升级</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/authentication">身份验证</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/upload-image">上传镜像</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/host/">主机管理</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/harvester-docs/zh/vm/create-vm">虚拟机管理</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/harvester-docs/zh/vm/create-vm">创建虚拟机</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/harvester-docs/zh/vm/create-windows-vm">创建 Windows 虚拟机</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/harvester-docs/zh/vm/edit-vm">编辑虚拟机</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/harvester-docs/zh/vm/access-to-the-vm">访问虚拟机</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/harvester-docs/zh/vm/backup-restore">虚拟机备份和恢复</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/harvester-docs/zh/vm/live-migration">热迁移</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/harvester-docs/zh/vm/hotplug-volume">热插拔卷</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/harvester-docs/zh/vm/resource-overcommit">资源超量</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/harvester-docs/zh/networking/harvester-network">网络</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/monitoring/">监控</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/harvester-docs/zh/rancher/rancher-integration">Rancher 集成</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/terraform/">Harvester Terraform Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/settings/">设置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/dev/dev-mode">开发者模式安装</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/harvester-docs/zh/troubleshooting/installation">故障排除</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/harvester-docs/zh/faq">常见问题</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/harvester-docs/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">虚拟机管理</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">创建 Windows 虚拟机</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：v1.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>创建 Windows 虚拟机</h1><p>你可以从 <strong>Virtual Machines</strong> 页面创建一个或多个虚拟机。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>如果需要创建 Linux 虚拟机，请参见<a href="/harvester-docs/zh/vm/create-vm">本页面</a>。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何创建-windows-虚拟机">如何创建 Windows 虚拟机<a class="hash-link" href="#如何创建-windows-虚拟机" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="header-section">Header Section<a class="hash-link" href="#header-section" title="标题的直接链接">​</a></h3><ol><li>选择创建<code>单个实例</code>或<code>多个实例</code>。</li><li>设置虚拟机名称。</li><li>（可选）输入虚拟机的描述。</li><li>（可选）选择<code>使用虚拟机模板</code>并选择 <code>windows-iso-image-base-template</code>。此模板将为 Windows 添加带有 <code>virtio</code> 驱动的卷。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="基本信息选项卡">基本信息选项卡<a class="hash-link" href="#基本信息选项卡" title="标题的直接链接">​</a></h3><ol><li>配置要分配给虚拟机的 <code>CPU</code> 核数。</li><li>配置要分配给虚拟机的<code>内存</code>。</li><li>（可选）选择现有的 <code>SSH 密钥</code> 或上传新的密钥​​。</li></ol><p><img loading="lazy" alt="create-windows-vm" src="/harvester-docs/zh/assets/images/create-windows-vm-bd4beb4bebfe8c490ddd02d838760d56.png" width="1920" height="1080" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>As mentioned above, it is recommended that you use the Windows VM template. <code>卷</code>部分将描述 Windows 虚拟机模板自动创建的选项。</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_S0QG"><p>The <code>bootOrder</code> values need to be set with the installation image first. 如果你修改这些值，你的虚拟机可能无法启动到安装磁盘。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="卷选项卡">卷选项卡<a class="hash-link" href="#卷选项卡" title="标题的直接链接">​</a></h3><ol><li><strong>第一个卷</strong>是一个<code>镜像卷</code>，具有以下值：<ol><li><code>名称</code>：默认设置为 <code>cdrom-disk</code>。你也可以修改它。</li><li><code>镜像</code>：选择要安装的 Windows 镜像。有关如何创建新镜像的完整说明，请参见<a href="/harvester-docs/zh/upload-image">上传镜像</a>。</li><li><code>类型</code>：选择 <code>cd-rom</code>。</li><li><code>大小</code>：默认值是 <code>20</code>。如果你的镜像较大，你可以更改该值。</li><li><code>Bus</code>：默认值是 <code>SATA</code>。建议你不要修改该值。</li></ol></li><li><strong>第二个卷</strong>是具有以下值的<code>卷</code>：<ol><li><code>名称</code>：默认设置为 <code>rootdisk</code>。你也可以修改它。</li><li><code>大小</code>：默认值是 <code>32</code>。在更改此值之前，请参见 <a href="https://docs.microsoft.com/en-us/windows-server/get-started/hardware-requirements#storage-controller-and-disk-space-requirements" target="_blank" rel="noopener noreferrer">Windows Server</a> 和 <a href="https://docs.microsoft.com/en-us/windows/whats-new/windows-11-requirements#hardware-requirements" target="_blank" rel="noopener noreferrer">Windows 11</a> 的磁盘空间要求。</li><li><code>Bus</code>：默认值是 <code>VirtIO</code>。你也可以将它修改为其他可用的选项，例如 <code>SATA</code> 或 <code>SCSI</code>。</li></ol></li><li><strong>第三个卷</strong>是具有以下值的<code>容器</code> ：<ol><li><code>名称</code>：默认设置为 <code>virtio-container-disk</code>。你也可以修改它。</li><li><code>Docker 镜像</code>：默认设置为 <code>registry.suse.com/suse/vmdp/vmdp:2.5.3</code>。建议你不要修改该值。</li><li><code>Bus</code>：默认值是 <code>SATA</code>。建议你不要修改该值。</li></ol></li><li>你可以使用<code>添加卷</code>、<code>添加现有卷</code>、<code>添加虚拟机镜像</code>或<code>添加容器</code>按钮来添加其他磁盘.</li></ol><p><img loading="lazy" alt="create-windows-vm-volumes" src="/harvester-docs/zh/assets/images/create-windows-vm-volumes-b654694515256a1d4a14655cc5241b90.png" width="1920" height="1080" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="网络选项卡">网络选项卡<a class="hash-link" href="#网络选项卡" title="标题的直接链接">​</a></h3><ol><li><strong>Management Network</strong> 默认添加，并带有以下值：<ol><li><code>名称</code>：默认设置为 <code>default</code>。你也可以修改它。</li><li><code>网络</code>：默认值是 <code>management Network</code>。如果尚未创建其他网络，则无法更改此选项。有关如何创建新网络的完整说明，请参见 <a href="/harvester-docs/zh/networking/harvester-network">Harvester 网络</a>。</li><li><code>模式</code>：默认设置为 <code>e1000</code>。你也可以将其设为下拉菜单中的其他可用选项。</li><li><code>类型</code>：默认值是 <code>masquerade</code>。你也可以将其设置为 <code>bridge</code>。</li></ol></li><li>你可以点击<code>添加网络</code>来添加其他网络。</li></ol><p><img loading="lazy" alt="create-windows-vm-networks" src="/harvester-docs/zh/assets/images/create-windows-vm-networks-1a29d10728925ba8f4edc495d26a7421.png" width="1920" height="1080" class="img_ev3q"></p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_S0QG"><p>Changing the <code>Node Scheduling</code> settings can impact Harvester features, such as disabling <code>Live migration</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="节点调度选项卡">节点调度选项卡<a class="hash-link" href="#节点调度选项卡" title="标题的直接链接">​</a></h3><ol><li><code>节点调度</code>默认设置为<code>在任何可用节点上运行虚拟机</code>。你也可以将其设为下拉菜单中的其他可用选项。</li></ol><p><img loading="lazy" alt="create-windows-vm-scheduling" src="/harvester-docs/zh/assets/images/create-windows-vm-scheduling-ffa18f9b5afd614db7aa8a50082f827e.png" width="1920" height="1080" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="高级选项选项卡">高级选项选项卡<a class="hash-link" href="#高级选项选项卡" title="标题的直接链接">​</a></h3><ol><li><code>操作系统类型</code>：默认设置为<code>Windows</code>。建议你不要修改该值。</li><li><code>机器类型</code>：默认设置为 <code>None</code>。建议你不要修改该值。在更改此值之前，请参见 <a href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/#machine-type" target="_blank" rel="noopener noreferrer">KubeVirt 机器类型</a>文档。</li><li>（可选）<code>主机名</code>：设置虚拟机的主机名。</li><li>（可选）<code>Cloud Config</code>：<code>用户数据</code>和<code>网络数据</code>值均使用为默认值。目前，这些配置不适用于基于 Windows 的虚拟机。</li></ol><p><img loading="lazy" alt="create-windows-vm-advanced" src="/harvester-docs/zh/assets/images/create-windows-vm-advanced-c8455fc5cdf66e23baf842adb44de30b.png" width="1920" height="1080" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="页脚部分">页脚部分<a class="hash-link" href="#页脚部分" title="标题的直接链接">​</a></h3><ol><li><code>创建后启动虚拟机</code>：此选项默认勾选。如果你不希望虚拟机在创建后启动，你可以取消勾选它。</li></ol><p>完成所有设置后，单击<code>创建</code>来创建虚拟机。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>If you need to add advanced settings, you can edit the VM configuration directly by clicking on <code>Edit as YAML</code>.
如果你需要取消所有更改，点击<code>取消</code>。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-windows">安装 Windows<a class="hash-link" href="#安装-windows" title="标题的直接链接">​</a></h2><ol><li><p>选择你刚才创建的虚拟机，然后单击 <code>Start</code> 来启动虚拟机（如果你选择了 <code>Start virtual machine on creation</code>，虚拟机将在创建后自动启动）。</p></li><li><p>Boot into the installer, and follow the instructions given by the installer.</p></li><li><p>(Optional) If you are using <code>virtio</code> based volumes, you will need to load the specific driver to allow the installer to detect them. If you&#x27;re using VM template <code>windows-iso-image-base-template</code>, the instruction is as follows:</p><ol><li>Click on <code>Load driver</code>, and then click <code>Browse</code> on the dialog box, and find a CD-ROM drive with a <code>VMDP-WIN</code> prefix. Next, find the driver directory according to the Windows version you&#x27;re installing; for example, Windows Server 2012r2 should expand <code>win8.1-2012r2</code> and choose the <code>pvvx</code> directory inside.
<img loading="lazy" alt="find-virtio-driver-directory" src="/harvester-docs/zh/assets/images/find-virtio-driver-directory-5be0d2673d0b8c1c34d87a6962da065f.png" width="477" height="384" class="img_ev3q"></li><li>Click <code>OK</code> to allow the installer to scan this directory for drivers, choose <code>SUSE Block Driver for Windows</code>, and click <code>Next</code> to load the driver.
<img loading="lazy" alt="select-virtio-block-driver" src="/harvester-docs/zh/assets/images/select-virtio-block-driver-d72f63b4b89cb0c8fe7b4b8b9eb9971b.png" width="656" height="498" class="img_ev3q"></li><li>等待安装程序加载驱动程序。If you choose the correct driver version the <code>virtio</code> volumes will be detected once the driver is loaded.
<img loading="lazy" alt="installer-found-virtio-drive" src="/harvester-docs/zh/assets/images/installer-found-virtio-drive-09000201fe0e2d95e1aec7e2a84e35b3.png" width="641" height="485" class="img_ev3q"></li></ol></li><li><p>(Optional) If you are using other <code>virtio</code> based hardware like network adapter, you will need to install those drivers manually after completing the installation. To install drivers, open the VMDP driver disk, and use the installer based on your platform.</p></li></ol><p>The support matrix of VMDP driver pack for Windows are as follows (assume the VMDP CD-ROM drive path is E):</p><table><thead><tr><th align="center">Version</th><th align="center">Supported</th><th align="left">Driver path</th></tr></thead><tbody><tr><td align="center">Windows 7</td><td align="center">No</td><td align="left"><code>N/A</code></td></tr><tr><td align="center">Windows Server 2008</td><td align="center">No</td><td align="left"><code>N/A</code></td></tr><tr><td align="center">Windows Server 2008r2</td><td align="center">No</td><td align="left"><code>N/A</code></td></tr><tr><td align="center">Windows 8 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win8-2012\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2012 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win8-2012\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows 8.1 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win8.1-2012r2\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2012r2 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win8.1-2012r2\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows 10 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-server\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2016 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-server\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2019 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-server\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows 11 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-2004\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2022 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-2004\x86(x64)\pvvx</code></td></tr></tbody></table><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>If you didn&#x27;t use the <code>windows-iso-image-base-template</code> template, and you still need <code>virtio</code> devices, please make sure to add your custom Windows virtio driver to allow it to detect the hardware correctly.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="known-issues">Known Issues<a class="hash-link" href="#known-issues" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="windows-iso-unable-to-boot-when-using-efi-mode">Windows ISO unable to boot when using EFI mode<a class="hash-link" href="#windows-iso-unable-to-boot-when-using-efi-mode" title="标题的直接链接">​</a></h3><p>When using EFI mode with Windows, you may find the system booted with other devices like HDD or UEFI shell like the one below:</p><p><img loading="lazy" alt="efi-shell" src="/harvester-docs/zh/assets/images/efi-shell-830d79cf172af786bad73c8dc479fe31.png" width="800" height="608" class="img_ev3q"></p><p>That&#x27;s because Windows will prompt a <code>Press any key to boot from CD or DVD...</code> to let the user decide whether to boot from the installer ISO or not, and it needs human intervention to allow the system to boot from CD or DVD.</p><p><img loading="lazy" alt="boot-from-cd" src="/harvester-docs/zh/assets/images/boot-from-cd-5d0271f20ded1ac63970bc78f9da9ec5.png" width="818" height="621" class="img_ev3q"></p><p>Alternately if the system has already booted into the UEFI shell, you can type in <code>reset</code> to force the system to reboot again. Once the prompt appears you can press any key to let system boot from Windows ISO.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vm-crashes-when-reserved-memory-not-enough">VM crashes when reserved memory not enough<a class="hash-link" href="#vm-crashes-when-reserved-memory-not-enough" title="标题的直接链接">​</a></h3><p>There is a known issue with Windows VM when it is allocated more than 8GiB without enough reserve memory configured. The VM crashes without warning.</p><p>This can be fixed by allocating at least 256MiB of reserved memory to the template on the Advanced Options tab.</p><p><img loading="lazy" alt="reserved-memory-config" src="/harvester-docs/zh/assets/images/reserved-memory-config-e07eb981514d4cc4b8a00e43acfaaa71.png" width="1244" height="501" class="img_ev3q"></p><p>We will add a default 256MiB of reserved memory to the Windows template to prevent this problem in the future release.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bsod-blue-screen-of-death-at-first-boot-time-of-windows">BSoD (Blue Screen of Death) at first boot time of Windows<a class="hash-link" href="#bsod-blue-screen-of-death-at-first-boot-time-of-windows" title="标题的直接链接">​</a></h3><p>There is a known issue with Windows VM using Windows Server 2016 and above, a BSoD with error code <code>KMODE_EXCEPTION_NOT_HANDLED</code> may appears at the first boot time of Windows. We are still looking into it and will fix this issue in the future release.</p><p>As a workaround, you can create or modify the file <code>/etc/modprobe.d/kvm.conf</code> within the installation of Harvester by updating <code>/oem/99_custom.yaml</code> like below:</p><div class="language-YAML codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-YAML codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name: Harvester Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stages:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  initramfs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - commands: # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    files:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - path: /etc/modprobe.d/kvm.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      permissions: 384</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      owner: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      group: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      content: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          options kvm ignore_msrs=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      encoding: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ownerstring: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>This is still an experimental solution. For more information, please refer to <a href="https://github.com/harvester/harvester/issues/276" target="_blank" rel="noopener noreferrer">this issue</a> and please let us know if you have encountered any issues after applying this workaround.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/vickyhella/harvester-docs/edit/main/docs/vm/create-windows-vm.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/harvester-docs/zh/vm/create-vm"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">创建虚拟机</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/harvester-docs/zh/vm/edit-vm"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">编辑虚拟机</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#如何创建-windows-虚拟机" class="table-of-contents__link toc-highlight">如何创建 Windows 虚拟机</a><ul><li><a href="#header-section" class="table-of-contents__link toc-highlight">Header Section</a></li><li><a href="#基本信息选项卡" class="table-of-contents__link toc-highlight">基本信息选项卡</a></li><li><a href="#卷选项卡" class="table-of-contents__link toc-highlight">卷选项卡</a></li><li><a href="#网络选项卡" class="table-of-contents__link toc-highlight">网络选项卡</a></li><li><a href="#节点调度选项卡" class="table-of-contents__link toc-highlight">节点调度选项卡</a></li><li><a href="#高级选项选项卡" class="table-of-contents__link toc-highlight">高级选项选项卡</a></li><li><a href="#页脚部分" class="table-of-contents__link toc-highlight">页脚部分</a></li></ul></li><li><a href="#安装-windows" class="table-of-contents__link toc-highlight">安装 Windows</a></li><li><a href="#known-issues" class="table-of-contents__link toc-highlight">Known Issues</a><ul><li><a href="#windows-iso-unable-to-boot-when-using-efi-mode" class="table-of-contents__link toc-highlight">Windows ISO unable to boot when using EFI mode</a></li><li><a href="#vm-crashes-when-reserved-memory-not-enough" class="table-of-contents__link toc-highlight">VM crashes when reserved memory not enough</a></li><li><a href="#bsod-blue-screen-of-death-at-first-boot-time-of-windows" class="table-of-contents__link toc-highlight">BSoD (Blue Screen of Death) at first boot time of Windows</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 harvesterhci.io</div></div></div></footer></div>
<script src="/harvester-docs/zh/assets/js/runtime~main.39f8dad8.js"></script>
<script src="/harvester-docs/zh/assets/js/main.abac7136.js"></script>
</body>
</html>